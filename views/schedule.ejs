<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>coplaner - Schedule</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <link rel="stylesheet" href="/css/scheduleStyle.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
</head>
<body>

<nav class="navbar navbar-expand-md gradient-background">
    <div class="container container-fluid">
        <a class="navbar-brand fw-bold" href="/">coplaner</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse justify-content-end" id="navbarNavAltMarkup">
            <div class="navbar-nav">
                <a class="nav-link active mx-3" aria-current="page" href="/">Home</a>
                <a class="nav-link mx-3" href="/select">Generate</a>
                <a class="nav-link mx-3" href="/about">About</a>
            </div>
        </div>
    </div>
</nav>

<div>
    <div id="noScheduleDiv" class="centered invisible">
        <p class="h2 text-center">A schedule cannot be created for the courses you entered.</p>
        <a style="display: block; margin:50px auto; width: 200px" href="/select" class="btn btn-outline-dark">Create New Course List</a>
    </div>

    <div id="scheduleContent" class="mt-4 invisible">
        <div class='info text-center' >
            <h3 id="title">Schedule 1/2</h3>
        </div>
        <% if(limitReached){ %>
        <div class="alert alert-warning alert-dismissible fade show col-6 offset-3" role="alert">
            <strong>Warning:</strong> There are too many possible schedule options! Only the first 50 are shown!
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
        <% } %>
        <div class='d-flex justify-content-evenly mb-4'>
            <div class="text-center">
                <button id="copyCRNs" class="btn btn-outline-dark btn-sm" type="button"> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-copy" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M4 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2zm2-1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1zM2 5a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1v-1h1v1a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h1v1z"/>
                    </svg><span id="copyCRNsText"> Copy CRNs</span> </button>
            </div>
            <div class="d-inline text-center mt-0 pt-0">
                <p class="d-inline mt-1 mb-0">Use arrow keys to move between schedules.</p>

            </div>
            <div class="text-center">
                <button class="btn btn-outline-dark btn-sm" id="prev">< Previous</button>
                <button class="btn btn-outline-dark btn-sm" id="next">Next ></button>
            </div>
        </div>

        <div id='schedule'>
            <div class='s-legend'>
                <div class='s-cell s-head-info'>
                    <div class='s-name'>TT</div>
                </div>
                <div class='s-week-day s-cell'>
                    <div class='s-day'>Mon</div>
                </div>
                <div class='s-week-day s-cell'>
                    <div class='s-day'>Tue</div>
                </div>
                <div class='s-week-day s-cell'>
                    <div class='s-day'>Wed</div>
                </div>
                <div class='s-week-day s-cell'>
                    <div class='s-day'>Thu</div>
                </div>
                <div class='s-week-day s-cell'>
                    <div class='s-day'>Fri</div>
                </div>
            </div>
            <div class='s-container s-block'>
                <div class='s-head-info'>
                    <div class='s-head-hour'>
                        <div class='s-number'>8</div>
                        <div class='s-hourly-interval'>8.00-9.00</div>
                    </div>
                    <div class='s-head-hour'>
                        <div class='s-number'>9</div>
                        <div class='s-hourly-interval'>9.00 - 10.00</div>
                    </div>
                    <div class='s-head-hour'>
                        <div class='s-number'>10</div>
                        <div class='s-hourly-interval'>10.00 - 11.00</div>
                    </div>
                    <div class='s-head-hour'>
                        <div class='s-number'>11</div>
                        <div class='s-hourly-interval'>11.00 - 12.00</div>
                    </div>
                    <div class='s-head-hour'>
                        <div class='s-number'>12</div>
                        <div class='s-hourly-interval'>12.00 - 13.00</div>
                    </div>
                    <div class='s-head-hour'>
                        <div class='s-number'>13</div>
                        <div class='s-hourly-interval'>13.00 - 14.00</div>
                    </div>
                    <div class='s-head-hour'>
                        <div class='s-number'>14</div>
                        <div class='s-hourly-interval'>14.00 - 15.00</div>
                    </div>
                    <div class='s-head-hour'>
                        <div class='s-number'>15</div>
                        <div class='s-hourly-interval'>15.00 - 16.00</div>
                    </div>
                    <div class='s-head-hour'>
                        <div class='s-number'>16</div>
                        <div class='s-hourly-interval'>16.00 - 17.00</div>
                    </div>
                    <div class='s-head-hour'>
                        <div class='s-number'>17</div>
                        <div class='s-hourly-interval'>17.00 - 18.00</div>
                    </div>
                    <div class='s-head-hour'>
                        <div class='s-number'>18</div>
                        <div class='s-hourly-interval'>18.00 - 19.00</div>
                    </div>
                    <div class='s-head-hour'>
                        <div class='s-number'>19</div>
                        <div class='s-hourly-interval'>19.00 - 20.00</div>
                    </div>
                    <div class='s-head-hour'>
                        <div class='s-number'>20</div>
                        <div class='s-hourly-interval'>20.00 - 21.00</div>
                    </div>
                    <div class='s-head-hour'>
                        <div class='s-number'>21</div>
                        <div class='s-hourly-interval'>21.00 - 22.00</div>
                    </div>
                </div>
                <div class='s-rows-container'>
                    <div class='s-activities'>
                        <div class='s-act-row'></div>
                        <div class='s-act-row'></div>
                        <div class='s-act-row'></div>
                        <div class='s-act-row'></div>
                        <div class='s-act-row'></div>
                    </div>
                    <div class='s-row s-hour-row'>
                        <div class='s-hour-wrapper s-cell'>
                            <div class='s-half-hour'></div>
                            <div class='s-half-hour'></div>
                        </div>
                        <div class='s-hour-wrapper s-cell'>
                            <div class='s-half-hour'></div>
                            <div class='s-half-hour'></div>
                        </div>
                        <div class='s-hour-wrapper s-cell'>
                            <div class='s-half-hour'></div>
                            <div class='s-half-hour'></div>
                        </div>
                        <div class='s-hour-wrapper s-cell'>
                            <div class='s-half-hour'></div>
                            <div class='s-half-hour'></div>
                        </div>
                        <div class='s-hour-wrapper s-cell'>
                            <div class='s-half-hour'></div>
                            <div class='s-half-hour'></div>
                        </div>
                    </div>
                    <div class='s-row s-hour-row'>
                        <div class='s-hour-wrapper s-cell'>
                            <div class='s-half-hour'></div>
                            <div class='s-half-hour'></div>
                        </div>
                        <div class='s-hour-wrapper s-cell'>
                            <div class='s-half-hour'></div>
                            <div class='s-half-hour'></div>
                        </div>
                        <div class='s-hour-wrapper s-cell'>
                            <div class='s-half-hour'></div>
                            <div class='s-half-hour'></div>
                        </div>
                        <div class='s-hour-wrapper s-cell'>
                            <div class='s-half-hour'></div>
                            <div class='s-half-hour'></div>
                        </div>
                        <div class='s-hour-wrapper s-cell'>
                            <div class='s-half-hour'></div>
                            <div class='s-half-hour'></div>
                        </div>
                    </div>
                    <div class='s-row s-hour-row'>
                        <div class='s-hour-wrapper s-cell'>
                            <div class='s-half-hour'></div>
                            <div class='s-half-hour'></div>
                        </div>
                        <div class='s-hour-wrapper s-cell'>
                            <div class='s-half-hour'></div>
                            <div class='s-half-hour'></div>
                        </div>
                        <div class='s-hour-wrapper s-cell'>
                            <div class='s-half-hour'></div>
                            <div class='s-half-hour'></div>
                        </div>
                        <div class='s-hour-wrapper s-cell'>
                            <div class='s-half-hour'></div>
                            <div class='s-half-hour'></div>
                        </div>
                        <div class='s-hour-wrapper s-cell'>
                            <div class='s-half-hour'></div>
                            <div class='s-half-hour'></div>
                        </div>
                    </div>
                    <div class='s-row s-hour-row'>
                        <div class='s-hour-wrapper s-cell'>
                            <div class='s-half-hour'></div>
                            <div class='s-half-hour'></div>
                        </div>
                        <div class='s-hour-wrapper s-cell'>
                            <div class='s-half-hour'></div>
                            <div class='s-half-hour'></div>
                        </div>
                        <div class='s-hour-wrapper s-cell'>
                            <div class='s-half-hour'></div>
                            <div class='s-half-hour'></div>
                        </div>
                        <div class='s-hour-wrapper s-cell'>
                            <div class='s-half-hour'></div>
                            <div class='s-half-hour'></div>
                        </div>
                        <div class='s-hour-wrapper s-cell'>
                            <div class='s-half-hour'></div>
                            <div class='s-half-hour'></div>
                        </div>
                    </div>
                    <div class='s-row s-hour-row'>
                        <div class='s-hour-wrapper s-cell'>
                            <div class='s-half-hour'></div>
                            <div class='s-half-hour'></div>
                        </div>
                        <div class='s-hour-wrapper s-cell'>
                            <div class='s-half-hour'></div>
                            <div class='s-half-hour'></div>
                        </div>
                        <div class='s-hour-wrapper s-cell'>
                            <div class='s-half-hour'></div>
                            <div class='s-half-hour'></div>
                        </div>
                        <div class='s-hour-wrapper s-cell'>
                            <div class='s-half-hour'></div>
                            <div class='s-half-hour'></div>
                        </div>
                        <div class='s-hour-wrapper s-cell'>
                            <div class='s-half-hour'></div>
                            <div class='s-half-hour'></div>
                        </div>
                    </div>
                    <div class='s-row s-hour-row'>
                        <div class='s-hour-wrapper s-cell'>
                            <div class='s-half-hour'></div>
                            <div class='s-half-hour'></div>
                        </div>
                        <div class='s-hour-wrapper s-cell'>
                            <div class='s-half-hour'></div>
                            <div class='s-half-hour'></div>
                        </div>
                        <div class='s-hour-wrapper s-cell'>
                            <div class='s-half-hour'></div>
                            <div class='s-half-hour'></div>
                        </div>
                        <div class='s-hour-wrapper s-cell'>
                            <div class='s-half-hour'></div>
                            <div class='s-half-hour'></div>
                        </div>
                        <div class='s-hour-wrapper s-cell'>
                            <div class='s-half-hour'></div>
                            <div class='s-half-hour'></div>
                        </div>
                    </div>
                    <div class='s-row s-hour-row'>
                        <div class='s-hour-wrapper s-cell'>
                            <div class='s-half-hour'></div>
                            <div class='s-half-hour'></div>
                        </div>
                        <div class='s-hour-wrapper s-cell'>
                            <div class='s-half-hour'></div>
                            <div class='s-half-hour'></div>
                        </div>
                        <div class='s-hour-wrapper s-cell'>
                            <div class='s-half-hour'></div>
                            <div class='s-half-hour'></div>
                        </div>
                        <div class='s-hour-wrapper s-cell'>
                            <div class='s-half-hour'></div>
                            <div class='s-half-hour'></div>
                        </div>
                        <div class='s-hour-wrapper s-cell'>
                            <div class='s-half-hour'></div>
                            <div class='s-half-hour'></div>
                        </div>
                    </div>
                    <div class='s-row s-hour-row'>
                        <div class='s-hour-wrapper s-cell'>
                            <div class='s-half-hour'></div>
                            <div class='s-half-hour'></div>
                        </div>
                        <div class='s-hour-wrapper s-cell'>
                            <div class='s-half-hour'></div>
                            <div class='s-half-hour'></div>
                        </div>
                        <div class='s-hour-wrapper s-cell'>
                            <div class='s-half-hour'></div>
                            <div class='s-half-hour'></div>
                        </div>
                        <div class='s-hour-wrapper s-cell'>
                            <div class='s-half-hour'></div>
                            <div class='s-half-hour'></div>
                        </div>
                        <div class='s-hour-wrapper s-cell'>
                            <div class='s-half-hour'></div>
                            <div class='s-half-hour'></div>
                        </div>
                    </div>
                    <div class='s-row s-hour-row'>
                        <div class='s-hour-wrapper s-cell'>
                            <div class='s-half-hour'></div>
                            <div class='s-half-hour'></div>
                        </div>
                        <div class='s-hour-wrapper s-cell'>
                            <div class='s-half-hour'></div>
                            <div class='s-half-hour'></div>
                        </div>
                        <div class='s-hour-wrapper s-cell'>
                            <div class='s-half-hour'></div>
                            <div class='s-half-hour'></div>
                        </div>
                        <div class='s-hour-wrapper s-cell'>
                            <div class='s-half-hour'></div>
                            <div class='s-half-hour'></div>
                        </div>
                        <div class='s-hour-wrapper s-cell'>
                            <div class='s-half-hour'></div>
                            <div class='s-half-hour'></div>
                        </div>
                    </div>
                    <div class='s-row s-hour-row'>
                        <div class='s-hour-wrapper s-cell'>
                            <div class='s-half-hour'></div>
                            <div class='s-half-hour'></div>
                        </div>
                        <div class='s-hour-wrapper s-cell'>
                            <div class='s-half-hour'></div>
                            <div class='s-half-hour'></div>
                        </div>
                        <div class='s-hour-wrapper s-cell'>
                            <div class='s-half-hour'></div>
                            <div class='s-half-hour'></div>
                        </div>
                        <div class='s-hour-wrapper s-cell'>
                            <div class='s-half-hour'></div>
                            <div class='s-half-hour'></div>
                        </div>
                        <div class='s-hour-wrapper s-cell'>
                            <div class='s-half-hour'></div>
                            <div class='s-half-hour'></div>
                        </div>
                    </div>
                    <div class='s-row s-hour-row'>
                        <div class='s-hour-wrapper s-cell'>
                            <div class='s-half-hour'></div>
                            <div class='s-half-hour'></div>
                        </div>
                        <div class='s-hour-wrapper s-cell'>
                            <div class='s-half-hour'></div>
                            <div class='s-half-hour'></div>
                        </div>
                        <div class='s-hour-wrapper s-cell'>
                            <div class='s-half-hour'></div>
                            <div class='s-half-hour'></div>
                        </div>
                        <div class='s-hour-wrapper s-cell'>
                            <div class='s-half-hour'></div>
                            <div class='s-half-hour'></div>
                        </div>
                        <div class='s-hour-wrapper s-cell'>
                            <div class='s-half-hour'></div>
                            <div class='s-half-hour'></div>
                        </div>
                    </div>
                    <div class='s-row s-hour-row'>
                        <div class='s-hour-wrapper s-cell'>
                            <div class='s-half-hour'></div>
                            <div class='s-half-hour'></div>
                        </div>
                        <div class='s-hour-wrapper s-cell'>
                            <div class='s-half-hour'></div>
                            <div class='s-half-hour'></div>
                        </div>
                        <div class='s-hour-wrapper s-cell'>
                            <div class='s-half-hour'></div>
                            <div class='s-half-hour'></div>
                        </div>
                        <div class='s-hour-wrapper s-cell'>
                            <div class='s-half-hour'></div>
                            <div class='s-half-hour'></div>
                        </div>
                        <div class='s-hour-wrapper s-cell'>
                            <div class='s-half-hour'></div>
                            <div class='s-half-hour'></div>
                        </div>
                    </div>
                    <div class='s-row s-hour-row'>
                        <div class='s-hour-wrapper s-cell'>
                            <div class='s-half-hour'></div>
                            <div class='s-half-hour'></div>
                        </div>
                        <div class='s-hour-wrapper s-cell'>
                            <div class='s-half-hour'></div>
                            <div class='s-half-hour'></div>
                        </div>
                        <div class='s-hour-wrapper s-cell'>
                            <div class='s-half-hour'></div>
                            <div class='s-half-hour'></div>
                        </div>
                        <div class='s-hour-wrapper s-cell'>
                            <div class='s-half-hour'></div>
                            <div class='s-half-hour'></div>
                        </div>
                        <div class='s-hour-wrapper s-cell'>
                            <div class='s-half-hour'></div>
                            <div class='s-half-hour'></div>
                        </div>
                    </div>
                    <div class='s-row s-hour-row'>
                        <div class='s-hour-wrapper s-cell'>
                            <div class='s-half-hour'></div>
                            <div class='s-half-hour'></div>
                        </div>
                        <div class='s-hour-wrapper s-cell'>
                            <div class='s-half-hour'></div>
                            <div class='s-half-hour'></div>
                        </div>
                        <div class='s-hour-wrapper s-cell'>
                            <div class='s-half-hour'></div>
                            <div class='s-half-hour'></div>
                        </div>
                        <div class='s-hour-wrapper s-cell'>
                            <div class='s-half-hour'></div>
                            <div class='s-half-hour'></div>
                        </div>
                        <div class='s-hour-wrapper s-cell'>
                            <div class='s-half-hour'></div>
                            <div class='s-half-hour'></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="unscheduledCoursesDiv" class="offset-0 offset-sm-1 offset-md-2 offset-xl-3 mt-3 mb-5 pb-5">
            <p class="mb-0">Courses without assigned meeting times:</p>
            <ul id="unscheduledCoursesList"></ul>
        </div>

    </div>
</div>

<footer style="background: #efefef" class="footer px-5 py-4 fixed-bottom text-center">
    &copy; <%=new Date().getFullYear()%> coplaner
</footer>

<!-- partial -->
<script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js'></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>
<script src="/js/scheduleScript.js"></script>
<script>
    schedule.timetables = <%- JSON.stringify(t) %>;
    schedule.index = 0;
    schedule.len = schedule.timetables.length
    if(schedule.timetables.length !== 0){
        $("#scheduleContent").removeClass("invisible")
        schedule.activities.update()
    }else{
        $("#noScheduleDiv").removeClass("invisible")
    }

    $("#copyCRNs").click(function() {
        let crns = [...new Set(schedule.timetables[schedule.index].map(c => c.crn))].join(", ")
        navigator.clipboard.writeText(crns);

        let $this = $("#copyCRNsText")
        let oldText = " Copy CRNs";
        $this.text(" Copied");
        setTimeout(function() {
            $this.text(oldText);
        }, 500);
    });
</script>

</body>
</html>
